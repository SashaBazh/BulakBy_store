<div *ngIf="items?.length" class="dynamic-list">
  <div
    class="list-item"
    *ngFor="let item of items; let i = index"
    (click)="toggleExpanded(i)"
  >
    <div class="item-title">
      {{ item.name }}
      <span class="toggle-icon" [class.expanded]="selectedIndex === i">
        <svg width="14" height="9" viewBox="0 0 10 6" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M0.792893 5.20711C1.18342 5.59763 1.81658 5.59763 2.20711 5.20711L5 2.41421L7.79289 5.20711C8.18342 5.59763 8.81658 5.59763 9.20711 5.20711C9.59763 4.81658 9.59763 4.18342 9.20711 3.79289L5.70711 0.292894C5.31658 -0.0976305 4.68342 -0.0976305 4.29289 0.292894L0.792893 3.79289C0.402368 4.18342 0.402368 4.81658 0.792893 5.20711Z"
            fill="#E0E0E0" />
        </svg>
      </span>
    </div>
    <div *ngIf="selectedIndex === i" class="item-options">
      <div class="option-item" *ngFor="let option of item.options">
        <label class="checkbox-container" (click)="$event.stopPropagation()">
          <input
            type="checkbox"
            [checked]="isSelected(item.id, option)"
            (change)="toggleOption(item.id, option)"
          />
          <span class="checkmark"></span>
          {{ option.value }}
        </label>
      </div>
    </div>
  </div>
</div>
